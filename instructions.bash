#!/bin/bash

# test to make sure the instructions directory is here..
if [ ! -d "instruction-contents" ]; then
    echo "[+] Creating instruction contents directory"
    mkdir "instruction-contents"
fi


# otool -t simple | cut -d " " -f 2-4
for i in `ls`
do
    type=`file $i`
    needle='executable arm'
    if [[ "$type" == *"$needle"* ]]; then
	echo "Found arm executable -> $type"
	# parse out the file name we'll write to...
	fileprefix=`echo $type | cut -d':' -f 1`
	filename="${fileprefix}.instr"
	`otool -t $fileprefix | cut -d " " -f 2-5 > "instruction-contents/${filename}"`
    fi
done
