varying lowp vec4 DestinationColor;

varying lowp vec2 TexCoordOut;
uniform sampler2D Texture;
uniform sampler2D Mask;


// asume we have our signature in four bytes or less...
bool isValidSignature( lowp vec4 pixel )
{
    lowp float norm;
    norm = dot(pixel.rgb , pixel.rgb );
    bool valid = false;
    if ( norm > 0.0 && norm < 1.0 )
    {
        // for now we just see if the all match, this means
        if ( pixel.r == pixel.g && pixel.g == pixel.b  )
        { 
            valid = true;
        }
            
    }
    return valid;
}



// basic shader to operate on multiple texture operations..
void main(void) {
    
    bool result = false;
    result = isValidSignature( texture2D(Texture,TexCoordOut) );

    if ( result  )
    {
        gl_FragColor    = vec4( 1, 0, 0, 1 );
    }
    else 
    {
        gl_FragColor    = vec4( 0, 0, 0, 1 ) * texture2D( Texture, TexCoordOut);
    }
    
    
}


